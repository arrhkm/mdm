-- MySQL Script generated by MySQL Workbench
-- Sel 20 Des 2016 05:07:02  WIB
-- Model: mdm    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema mdm
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mdm
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mdm` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `mdm` ;

-- -----------------------------------------------------
-- Table `mdm`.`employee`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mdm`.`employee` (
  `id` INT NOT NULL COMMENT '',
  `employee_number` VARCHAR(255) NOT NULL COMMENT '',
  `first_name` VARCHAR(255) NULL COMMENT '',
  `last_name` VARCHAR(255) NULL COMMENT '',
  `nick_name` VARCHAR(255) NULL COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '',
  UNIQUE INDEX `employee_id_UNIQUE` (`employee_number` ASC)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mdm`.`period_year`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mdm`.`period_year` (
  `id` INT NOT NULL COMMENT '',
  `date_start` DATETIME NOT NULL COMMENT '',
  `date_end` DATETIME NULL COMMENT '',
  `name_period` VARCHAR(45) NULL COMMENT '',
  `date_day` TINYINT(2) UNSIGNED NULL COMMENT '',
  `date_month` TINYINT(2) UNSIGNED NULL COMMENT '',
  `date_year` TINYINT(4) UNSIGNED NULL COMMENT '',
  PRIMARY KEY (`id`, `date_start`)  COMMENT '',
  UNIQUE INDEX `date_start_UNIQUE` (`date_start` ASC)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mdm`.`leave_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mdm`.`leave_type` (
  `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '',
  `name_type` VARCHAR(45) NULL COMMENT '',
  `deleted` TINYINT(1) NULL DEFAULT 0 COMMENT '',
  `exclude_in_reports_if_no_entitlement` TINYINT(1) NULL DEFAULT 0 COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '')
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mdm`.`leave_request`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mdm`.`leave_request` (
  `id` INT NOT NULL AUTO_INCREMENT COMMENT '',
  `date_applied` DATE NULL COMMENT '',
  `comments` VARCHAR(256) NULL COMMENT '',
  `employee_id` INT NOT NULL COMMENT '',
  `leave_type_id` INT(10) UNSIGNED NOT NULL COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '',
  INDEX `fk_leave_request_employee1_idx` (`employee_id` ASC)  COMMENT '',
  INDEX `fk_leave_request_leave_type1_idx` (`leave_type_id` ASC)  COMMENT '',
  CONSTRAINT `fk_leave_request_employee1`
    FOREIGN KEY (`employee_id`)
    REFERENCES `mdm`.`employee` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_leave_request_leave_type1`
    FOREIGN KEY (`leave_type_id`)
    REFERENCES `mdm`.`leave_type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mdm`.`leave`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mdm`.`leave` (
  `id` INT(11) NOT NULL AUTO_INCREMENT COMMENT '',
  `date` DATE NULL COMMENT '',
  `lenght_days` DECIMAL(6,2) NULL COMMENT '',
  `lenght_hours` DECIMAL(6,2) NULL COMMENT '',
  `start_time` TIME NULL COMMENT '',
  `end_time` TIME NULL COMMENT '																					',
  `leave_request_id` INT NOT NULL COMMENT '',
  `leave_type_id` INT(10) UNSIGNED NOT NULL COMMENT '',
  `employee_id` INT NOT NULL COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '',
  INDEX `fk_leave_leave_request1_idx` (`leave_request_id` ASC)  COMMENT '',
  INDEX `fk_leave_leave_type1_idx` (`leave_type_id` ASC)  COMMENT '',
  INDEX `fk_leave_employee1_idx` (`employee_id` ASC)  COMMENT '',
  CONSTRAINT `fk_leave_leave_request1`
    FOREIGN KEY (`leave_request_id`)
    REFERENCES `mdm`.`leave_request` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_leave_leave_type1`
    FOREIGN KEY (`leave_type_id`)
    REFERENCES `mdm`.`leave_type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_leave_employee1`
    FOREIGN KEY (`employee_id`)
    REFERENCES `mdm`.`employee` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

/*
-- -----------------------------------------------------
-- Table `mdm`.`user`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mdm`.`user` (
  `id` INT(11) NOT NULL COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '')
ENGINE = InnoDB;
*/

-- -----------------------------------------------------
-- Table `mdm`.`leave_entitlement`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mdm`.`leave_entitlement` (
  `id` INT(11) NOT NULL COMMENT '',
  `no_of_days` DECIMAL(19,5) NULL COMMENT '',
  `days_used` DECIMAL(8,4) NULL COMMENT '',
  `from_date` DATETIME NULL COMMENT '',
  `to_date` DATETIME NULL COMMENT '',
  `credited_date` DATETIME NULL COMMENT '',
  `note` VARCHAR(225) NULL COMMENT '',
  `deleted` TINYINT(1) NULL COMMENT '',
  `createed_by_name` VARCHAR(45) NULL COMMENT '',
  `employee_id` INT NOT NULL COMMENT '',
  `leave_type_id` INT(10) UNSIGNED NOT NULL COMMENT '',
  `user_id` INT(11) NOT NULL COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '',
  INDEX `fk_leave_entitlement_employee1_idx` (`employee_id` ASC)  COMMENT '',
  INDEX `fk_leave_entitlement_leave_type1_idx` (`leave_type_id` ASC)  COMMENT '',
  INDEX `fk_leave_entitlement_user1_idx` (`user_id` ASC)  COMMENT '',
  CONSTRAINT `fk_leave_entitlement_employee1`
    FOREIGN KEY (`employee_id`)
    REFERENCES `mdm`.`employee` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_leave_entitlement_leave_type1`
    FOREIGN KEY (`leave_type_id`)
    REFERENCES `mdm`.`leave_type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_leave_entitlement_user1`
    FOREIGN KEY (`user_id`)
    REFERENCES `mdm`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mdm`.`leave_has_leave_entitlement`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mdm`.`leave_has_leave_entitlement` (
  `id` INT(11) NOT NULL AUTO_INCREMENT COMMENT '',
  `leave_id` INT(11) NOT NULL COMMENT '',
  `leave_entitlement_id` INT(11) NOT NULL COMMENT '',
  `lenght_days` DECIMAL(6,4) NULL COMMENT '',
  INDEX `fk_leave_has_leave_entitlement_leave_entitlement1_idx` (`leave_entitlement_id` ASC)  COMMENT '',
  INDEX `fk_leave_has_leave_entitlement_leave1_idx` (`leave_id` ASC)  COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '',
  CONSTRAINT `fk_leave_has_leave_entitlement_leave1`
    FOREIGN KEY (`leave_id`)
    REFERENCES `mdm`.`leave` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_leave_has_leave_entitlement_leave_entitlement1`
    FOREIGN KEY (`leave_entitlement_id`)
    REFERENCES `mdm`.`leave_entitlement` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mdm`.`leave_request_comment`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mdm`.`leave_request_comment` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '',
  `employee_id` INT NULL COMMENT '',
  `leave_request_id` INT NOT NULL COMMENT '',
  `user_id` INT(11) NULL COMMENT '',
  `created` DATETIME NULL COMMENT '',
  `created_by_name` VARCHAR(255) NULL COMMENT '',
  `comments` VARCHAR(255) NULL COMMENT '',
  INDEX `fk_leave_request_comment_employee1_idx` (`employee_id` ASC)  COMMENT '',
  INDEX `fk_leave_request_comment_leave_request1_idx` (`leave_request_id` ASC)  COMMENT '',
  INDEX `fk_leave_request_comment_user1_idx` (`user_id` ASC)  COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '',
  CONSTRAINT `fk_leave_request_comment_employee1`
    FOREIGN KEY (`employee_id`)
    REFERENCES `mdm`.`employee` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_leave_request_comment_leave_request1`
    FOREIGN KEY (`leave_request_id`)
    REFERENCES `mdm`.`leave_request` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_leave_request_comment_user1`
    FOREIGN KEY (`user_id`)
    REFERENCES `mdm`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mdm`.`leave_comment`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mdm`.`leave_comment` (
  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '',
  `leave_id` INT(11) NOT NULL COMMENT '',
  `employee_id` INT NULL COMMENT '',
  `user_id` INT(11) NOT NULL COMMENT '',
  `created` DATETIME NULL COMMENT '',
  `comments` VARCHAR(255) NULL COMMENT '',
  PRIMARY KEY (`id`)  COMMENT '',
  INDEX `fk_leave_comment_leave1_idx` (`leave_id` ASC)  COMMENT '',
  INDEX `fk_leave_comment_employee1_idx` (`employee_id` ASC)  COMMENT '',
  INDEX `fk_leave_comment_user1_idx` (`user_id` ASC)  COMMENT '',
  CONSTRAINT `fk_leave_comment_leave1`
    FOREIGN KEY (`leave_id`)
    REFERENCES `mdm`.`leave` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_leave_comment_employee1`
    FOREIGN KEY (`employee_id`)
    REFERENCES `mdm`.`employee` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_leave_comment_user1`
    FOREIGN KEY (`user_id`)
    REFERENCES `mdm`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
